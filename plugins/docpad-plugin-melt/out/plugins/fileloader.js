// Generated by CoffeeScript 1.6.3
(function() {
  var glob;

  glob = require("simple-glob");

  module.exports = {
    events: {
      populateCollections: function(opts, next) {
        var docpad, files, scripts, styles;
        docpad = this.docpad;
        scripts = docpad.getBlock("scripts");
        styles = docpad.getBlock("styles");
        if (docpad.getEnvironment() === "production") {
          if (docpad.config.js) {
            scripts.add("/js/app.js");
          }
          styles.add("/css/app.css");
        } else {
          if (docpad.config.js) {
            files = glob({
              cwd: docpad.config.rootPath + "/src/files"
            }, docpad.config.js);
            files.forEach(function(url) {
              return scripts.add(url, {
                defer: false
              });
            });
          }
          styles.add("/css/all.css");
        }
        return next();
      }
    }
  };

}).call(this);
